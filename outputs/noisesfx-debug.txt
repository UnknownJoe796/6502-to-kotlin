NoiseSfxHandler function:
  Starting block: NoiseSfxHandler
  Blocks in function (18):
    - PlayBrickShatter
        lda #$20                 ;load length of brick shatter sound
        sta Noise_SfxLenCounter
        
    - ContinueBrickShatter
        lda Noise_SfxLenCounter
        lsr                         ;divide by 2 and check for bit set to use offset
        bcc DecrementSfx3Length
    - @15560
        ldx BrickShatterFreqData,y  ;load reg contents of brick shatter sound
        lda BrickShatterEnvData,y
        
    - PlayNoiseSfx
        lda #$18
        sta SND_NOISE_REG+3
        
    - DecrementSfx3Length
        DecrementSfx3Length:
        dec Noise_SfxLenCounter  ;decrement length of sfx
        bne ExSfx3
    - @15573
        sta SND_NOISE_REG
        lda #$00
        sta NoiseSoundBuffer
    - ExSfx3 [HAS RTS]
        ExSfx3: rts
    - NoiseSfxHandler
        NoiseSfxHandler:
        ldy NoiseSoundQueue   ;check for sfx in queue
        beq CheckNoiseBuffer
    - @15582
        sty NoiseSoundBuffer  ;if found, put in buffer
        lsr NoiseSoundQueue
        bcs PlayBrickShatter  ;brick shatter
    - @15585
        lsr NoiseSoundQueue
        bcs PlayBowserFlame   ;bowser flame
    - @15587
        
    - CheckNoiseBuffer
        CheckNoiseBuffer:
        lda NoiseSoundBuffer      ;check for sfx in buffer
        beq ExNH                  ;if not found, exit sub
    - @15591
        lsr
        bcs ContinueBrickShatter  ;brick shatter
    - @15593
        lsr
        bcs ContinueBowserFlame   ;bowser flame
    - ExNH [HAS RTS]
        ExNH:   rts
    - PlayBowserFlame
        lda #$40                    ;load length of bowser flame sound
        sta Noise_SfxLenCounter
        
    - ContinueBowserFlame
        ldx #$0f                    ;load reg contents of bowser flame sound
        lda BowserFlameEnvData-1,y
        bne PlayNoiseSfx            ;unconditional branch here
    - @15608
        
        ;--------------------------------
        

  Starting block for control flow: NoiseSfxHandler
  Starting block line index: 15579
  Reachable blocks from starting block (within function): 18
  Assigned blocks: 18
  Unreachable assigned blocks: 0

  Control flow (analyzeControls):
  Nodes: 8
    - Block: PlayBrickShatter
    - If:
        Then:
        - Block: @15560
        - Block: PlayNoiseSfx
    - If:
        Then:
        - Block: @15573
        Else:
        - Block: ExSfx3 [RETURN]
    - If:
        Then:
        - Loop (PostTest):
          - Block: PlayBrickShatter
          - Block: ContinueBrickShatter
          - Block: @15560
          - Block: PlayNoiseSfx
          - Block: DecrementSfx3Length
          - Block: @15573
          - Block: ExSfx3 [RETURN]
          - Block: NoiseSfxHandler
          - Block: @15582
        - If:
            Then:
            - Block: @15587
    - If:
        Then:
        - Block: @15591
        - If:
        Else:
        - Block: ExNH [RETURN]
    - Block: PlayBowserFlame
    - Block: ContinueBowserFlame
    - Block: @15608

  Control flow (improveControlFlow):
  Nodes: 7
    - If:
        Then:
        - Block: @15560
        - Block: PlayNoiseSfx
    - If:
        Then:
        - Block: @15573
        Else:
        - Block: ExSfx3 [RETURN]
    - If:
        Then:
        - Loop (PostTest):
          - Block: PlayBrickShatter
          - Block: ContinueBrickShatter
          - Block: DecrementSfx3Length
          - Block: NoiseSfxHandler
          - Block: @15582
        - If:
            Then:
            - Block: @15587
    - If:
        Then:
        - Block: @15591
        Else:
        - Block: ExNH [RETURN]
    - Block: PlayBowserFlame
    - Block: ContinueBowserFlame
    - Block: @15608
