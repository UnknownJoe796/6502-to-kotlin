# Repository Cleanup Summary

## Date: January 6, 2026

## Changes Made

### 1. Documentation Reorganization
- **Created** `docs/` structure with subdirectories:
  - `docs/architecture/` - Future home for decompiler design docs
  - `docs/guides/` - User guides (TESTING-GUIDE.md)
  - `docs/smb/` - SMB-specific insights (NMI-TIMING-INSIGHTS.md)
  - `docs/archive/` - Archived old documentation
- **Moved** `plans/DECOMPILER-COMPLETION-PLAN.md` → `docs/PROJECT-STATUS.md`
- **Archived** 20+ markdown files from `local/` to `docs/archive/`

### 2. Source Code Organization
- **Removed** orphaned `src/` directory (pre-Gradle structure)
- **Created** `smb/src/main/kotlin/.../generated/` subdirectory
- **Moved** generated code to `generated/` subdirectory:
  - `SMBDecompiled.kt` (1.1MB, 17,559 lines)
  - `SMBConstants.kt` (110KB memory labels)
  - `SMBRomData.kt` (87KB ROM data tables)
- **Separated** hand-written code from generated code
- **Moved** `smbdism.asm` from `outputs/` to `smb/` module
- **Moved** `happylee-warps.fm2` to `smb/` module

### 3. Tool Organization
- **Created** `tools/` directory structure:
  - `tools/tas/` - TAS analysis scripts (30+ shell scripts)
  - `tools/analysis/` - General analysis scripts
- **Created** `data/` directory:
  - `data/tas/` - TAS dumps and analysis outputs
  - `data/testgen/` - Test generation data
  - `data/roms/` - ROM files and metadata

### 4. Cleanup
- **Deleted** 15+ temporary debug output files from `outputs/`
- **Updated** `.gitignore` to exclude:
  - `outputs/` - temporary analysis outputs
  - `docs/archive/` - archived documentation  
  - `data/tas/*.bin` - binary dumps
  - `local/` - old directory structure

## File Counts

| Category | Before | After | Change |
|----------|--------|-------|--------|
| Docs in root/plans/local | ~30 | 0 | Moved to docs/ |
| Scripts in local/ | 50+ | 0 | Moved to tools/ |
| Generated files in smb/src | 3 | 3 | Moved to generated/ |
| Temp files in outputs/ | 18 | 3 | Deleted 15 |

## New Structure Benefits

1. **Clear Separation**: Hand-written vs generated code is obvious
2. **Single Source**: No more duplicate files in `outputs/` and `smb/`
3. **Organized Docs**: All documentation in one `docs/` tree
4. **Logical Grouping**: Scripts grouped by purpose in `tools/`
5. **Clean .gitignore**: Temporary outputs excluded from version control

## Verification

✅ **SMB module compiles**: `./gradlew :smb:compileKotlin` succeeds
✅ **TAS interpreter test passes**: `FullTASValidationTest` runs 5986 NMIs successfully
✅ **No broken imports**: Generated code package unchanged
✅ **Gradle build works**: Core tests run (pre-existing failures unrelated to cleanup)

## Migration Script

The cleanup was performed by `local/cleanup-repo.sh` (now in archive).
This script can be referenced if similar cleanup is needed in the future.

## Notes

- Generated code remains in `smb/src/.../generated/` (not in `build/`)
  - This allows IDE autocomplete and debugging
  - Should be regenerated by decompiler, not manually edited
- Old `outputs/` directory kept for reference (gitignored)
- Archives preserved in `docs/archive/` for historical reference
